# We set the language to c because python isn't supported on the MacOS X nodes
# on Travis. However, the language ends up being irrelevant anyway, since we
# install Python ourselves using conda.
language: c

sudo: false

addons:
    apt:
        packages:
            - graphviz
            - texlive-latex-extra
            - dvipng

env:
    global:
        - SETUP_CMD='test'
        - TEST_CMD='py.test test_env.py'
        - PYTHON_VERSION=3.5
        - USE_CONDA=True
        - DEBUG=True

matrix:
    include:
        - os: osx
          env: USE_CONDA=False ARCH=i386 PIP_DEPENDENCIES="numpy scipy astropy"

before_install:
    - ln -s . ci-helpers
    - source "ci-helpers/travis/setup.sh"

script:
   - eval $TEST_CMD
   - file /Users/travis/python_32bit/lib/python3.5/site-packages/scipy/special/_ufuncs.cpython-35m-darwin.so
   - python -c 'from scipy.special.orthogonal import p_roots'